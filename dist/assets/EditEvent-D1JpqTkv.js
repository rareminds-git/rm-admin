import{b as R,r as u,u as O,j as e,R as q,B as P}from"./index-CpFmk86o.js";import{R as x,C as c,b as h,a as H}from"./axios-Dx3QdDAU.js";import{T as J}from"./TextEditor-BhXx2iB8.js";import{h as j}from"./moment-G82_0lEo.js";import{F as l}from"./Form-ClsflyVD.js";import"./ckeditor5-FiHyv50m.js";import"./toString-qof7_FyP.js";const Z=()=>{var S,C,E,A,p,N,T,Y;const{id:b}=R(),[t,L]=u.useState([]),[n,i]=u.useState({eventData:{},eventSchedule:[],eventAgenda:[]}),[D,o]=u.useState({eventData:!0}),[v,g]=u.useState([]),[m,f]=u.useState([]),G=()=>{g([...v,{Date:"",Time:"",Description:""}])},V=()=>{f([...m,{Heading:"",Description:""}])},y=a=>{g(v.filter((d,r)=>r!==a))},M=a=>{f(m.filter((d,r)=>r!==a))};u.useState(0);const[k,B]=u.useState([]),I=O(),$=a=>{B(a.target.files[0])};u.useEffect(()=>{(()=>{let d={method:"get",maxBodyLength:1/0,url:`https://rareminds.in/api/events/${b}`,headers:{}};H.request(d).then(r=>{console.log("edit data",r.data),L(r.data),i(r.data),g(r.data.eventSchedule),f(r.data.eventAgenda)}).catch(r=>{console.log(r)})})()},[]);const F=()=>{let a=new FormData;for(var d in n)a.append(d,JSON.stringify(n[d]));a.append("Image1",k);let r={method:"post",maxBodyLength:1/0,url:`https://rareminds.in/api/editEvent/${b}`,headers:"Content-Type: multipart/form-data",data:a};H.request(r).then(s=>{I("/events")}).catch(s=>{console.log(s)})};return console.log("form data",n),e.jsx(q.Fragment,{children:e.jsx(x,{children:e.jsx(c,{sm:12,children:e.jsxs(h,{children:[e.jsx(h.Header,{children:e.jsx(h.Title,{as:"h5",children:"Event"})}),e.jsx(h.Body,{children:e.jsx(l,{children:e.jsxs(x,{children:[e.jsx(c,{md:4,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Event Title"}),e.jsx(l.Control,{placeholder:"Enter event title",defaultValue:(t==null?void 0:t.eventData)&&((S=t==null?void 0:t.eventData[0])==null?void 0:S.Heading1),onChange:a=>{i({...n,eventData:{...n.eventData,Heading1:a.target.value}}),o({eventData:!1})}})]})}),e.jsx(c,{md:4,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Event SubTitle"}),e.jsx(l.Control,{placeholder:"Enter event subtitle",defaultValue:(t==null?void 0:t.eventData)&&((C=t==null?void 0:t.eventData[0])==null?void 0:C.Heading2),onChange:a=>{i({...n,eventData:{...n.eventData,Heading2:a.target.value}}),o({eventData:!1})}})]})}),e.jsx(c,{md:4,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Event Category"}),e.jsx(l.Control,{placeholder:"Enter event category",defaultValue:(t==null?void 0:t.eventData)&&((E=t==null?void 0:t.eventData[0])==null?void 0:E.SubHeading1),onChange:a=>{i({...n,eventData:{...n.eventData,SubHeading1:a.target.value}}),o({eventData:!1})}})]})}),e.jsx(c,{md:4,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Organiser Name"}),e.jsx(l.Control,{placeholder:"Enter organiser name",defaultValue:(t==null?void 0:t.eventData)&&((A=t==null?void 0:t.eventData[0])==null?void 0:A.SubHeading2),onChange:a=>{i({...n,eventData:{...n.eventData,SubHeading2:a.target.value}}),o({eventData:!1})}})]})}),e.jsx(c,{md:4,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Event Date"}),e.jsx(l.Control,{type:"date",defaultValue:j((t==null?void 0:t.eventData)&&((p=t==null?void 0:t.eventData[0])==null?void 0:p.EventDate)).format("YYYY-MM-DD"),onChange:a=>{i({...n,eventData:{...n.eventData,EventDate:j(a.target.value).format("YYYY-MM-DD HH:mm:ss")}}),o({eventData:!1})}})]})}),e.jsx(c,{md:4,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Event Venue"}),e.jsx(l.Control,{placeholder:"Enter event venue",defaultValue:(t==null?void 0:t.eventData)&&((N=t==null?void 0:t.eventData[0])==null?void 0:N.Address1),onChange:a=>{i({...n,eventData:{...n.eventData,Address1:a.target.value}}),o({eventData:!1})}})]})}),e.jsx(c,{md:6,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Description"}),e.jsx(l.Control,{placeholder:"Enter Description",defaultValue:(t==null?void 0:t.eventData)&&((T=t==null?void 0:t.eventData[0])==null?void 0:T.Description),onChange:a=>{i({...n,eventData:{...n.eventData,Description:a.target.value}}),o({eventData:!1})},as:"textarea",rows:4})]})}),e.jsx(c,{md:3,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Event Image"}),e.jsx(l.Control,{type:"file",onChange:a=>{$(a),o({...D,eventData:!1})}})]})}),e.jsx(c,{md:3,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Enter Event Slug"}),e.jsx(l.Control,{placeholder:"Enter event slug",defaultValue:(t==null?void 0:t.eventData)&&((Y=t==null?void 0:t.eventData[0])==null?void 0:Y.ContentSlug),onChange:a=>{i({...n,eventData:{...n.eventData,ContentSlug:a.target.value}}),o({eventData:!1})}})]})}),e.jsx(c,{md:3,children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Registration Open"}),["radio"].map(a=>{var d,r;return e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Check,{inline:!0,label:"Yes",onChange:s=>{i({...n,eventData:{...n.eventData,Status:1}})},name:"group1",checked:!!(t!=null&&t.eventData&&((d=t==null?void 0:t.eventData[0])==null?void 0:d.Status)===1),type:a,id:`inline-${a}-1`}),e.jsx(l.Check,{inline:!0,label:"No",onChange:s=>{i({...n,eventData:{...n.eventData,Status:0}})},checked:!!(t!=null&&t.eventData&&((r=t==null?void 0:t.eventData[0])==null?void 0:r.Status)===0),name:"group1",type:a,id:`inline-${a}-2`})]},`inline-${a}`)})]})})]})})}),e.jsx(h.Header,{children:e.jsx(h.Title,{as:"h5",children:"Event Schedule"})}),e.jsxs(h.Body,{children:[v==null?void 0:v.map((a,d)=>e.jsxs(x,{children:[e.jsx(c,{sm:"5",children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Date"}),e.jsx(l.Control,{type:"date",defaultValue:j(a.Date).format("YYYY-MM-DD"),onChange:r=>{let s=[];n.eventSchedule.length>0?(s=n.eventSchedule,s[d]||(s[d]={}),s[d].Date=j(r.target.value).format("YYYY-MM-DD HH:mm:ss"),i({...n,eventSchedule:s})):(s.push({Date:j(r.target.value).format("YYYY-MM-DD HH:mm:ss")}),i({...n,eventSchedule:s})),o({eventSchedule:!1})}})]})}),e.jsx(c,{sm:"5",children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Title"}),e.jsx(l.Control,{type:"text",defaultValue:a.Title,onChange:r=>{let s=[];n.eventSchedule.length>0?(s=n.eventSchedule,s[d]||(s[d]={}),s[d].Title=r.target.value,i({...n,eventSchedule:s})):(s.push({Title:r.target.value}),i({...n,eventSchedule:s}))}})]})}),e.jsx(c,{sm:"2",children:e.jsx("button",{className:"btn btn-danger mt-4",onClick:()=>{let r=[...n.eventSchedule];r.splice(d,1),i({...n,eventSchedule:r}),y(d)},children:"Delete"})})]},d)),e.jsx("button",{className:"btn btn-success mt-4",onClick:()=>{let a=[...n.eventSchedule];a.push({Date:"",Title:""}),i({...n,eventSchedule:a}),G()},children:"Add Schedule Item"})]}),e.jsx(h.Header,{children:e.jsx(h.Title,{as:"h5",children:"Agenda"})}),e.jsxs(h.Body,{children:[m==null?void 0:m.map((a,d)=>e.jsxs(x,{children:[e.jsx(c,{sm:"3",children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Title"}),e.jsx(l.Control,{type:"text",defaultValue:a.Title,onChange:r=>{let s=[];n.eventAgenda.length>0?(s=n.eventAgenda,s[d]||(s[d]={}),s[d].Title=r.target.value,i({...n,eventAgenda:s})):(s.push({Title:r.target.value}),i({...n,eventAgenda:s})),o({eventAgenda:!1})}})]})}),e.jsx(c,{sm:"3",children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Time"}),e.jsx(l.Control,{type:"text",defaultValue:a.Time,onChange:r=>{let s=[];n.eventAgenda.length>0?(s=n.eventAgenda,s[d]||(s[d]={}),s[d].Time=r.target.value,i({...n,eventAgenda:s})):(s.push({Time:r.target.value}),i({...n,eventAgenda:s})),o({eventAgenda:!1})}})]})}),e.jsx(c,{sm:"4",children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"Description"}),e.jsx(J,{contentSlug:"eventAgenda",pageData:{},setBtnDisabled:o,setFormData:i,index:d,formData:n,defaultValue:a.Description,btnDisabled:D})]})}),e.jsx(c,{sm:"2",children:e.jsx("button",{className:"btn btn-danger mt-4",onClick:()=>{let r=[...n.eventAgenda];r.splice(d,1),i({...n,eventAgenda:r}),M(d)},children:"Delete"})})]},d)),e.jsx("button",{className:"btn btn-success mt-4",onClick:()=>{let a=[...n.eventAgenda];a.push({Title:"",Time:"",Description:""}),i({...n,eventAgenda:a}),V()},children:"Add Agenda Item"}),e.jsx(P,{variant:"primary",onClick:()=>F(),className:"float-right mt-4",children:"Submit"})]})]})})})})};export{Z as default};

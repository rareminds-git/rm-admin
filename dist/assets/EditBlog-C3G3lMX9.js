import{b as R,r as x,j as e,R as v,B as u}from"./index-CpFmk86o.js";import{R as m,C as o,b as n,a as Y}from"./axios-Dx3QdDAU.js";import{T as S}from"./TextEditor-BhXx2iB8.js";import{h as k}from"./helpers-D_C948am.js";import{S as D}from"./SuccessBanner-5bNXM_Ha.js";import{h as f}from"./moment-G82_0lEo.js";import{F as t}from"./Form-ClsflyVD.js";import"./ckeditor5-FiHyv50m.js";import"./toString-qof7_FyP.js";import"./Alert-B-JUCmsd.js";const Z=()=>{var E,y,T,G,B,H,M,N,L,O;const{userType:$,slug:p}=R(),[a,w]=x.useState(),[r,i]=x.useState({blogData:{},blogDetails:{},metadata:{}}),[h,d]=x.useState({blogData:!0,blogDetails:!0,metadata:!0}),[g,C]=x.useState({});x.useEffect(()=>{(()=>{let l={method:"get",maxBodyLength:1/0,url:`https://rareminds.in/api/blogs/${p}`,headers:{}};Y.request(l).then(c=>{console.log("edit data",c.data),w(k(c.data))}).catch(c=>{console.log(c)})})()},[]);const[V,F]=x.useState([]),I=s=>{F(URL.createObjectURL(s.target.files[0]));const l=new FormData;r.blogData.Heading1&&l.append("Heading1",r.blogData.Heading1),r.blogData.Heading2&&l.append("Heading2",r.blogData.Heading2),l.append("Image1",s.target.files[0]),i({blogData:l})},j=s=>{let l=r[s];console.log("form data",V),l.ContentSlug=s;let c={method:"post",maxBodyLength:1/0,url:`https://rareminds.in/api/editBlog/${p}/${s}`,headers:s==="blogData"?"Content-Type: multipart/form-data":"Content-Type: application/json",data:s==="blogData"?r[s]:JSON.stringify(l)};Y.request(c).then(b=>{console.log(JSON.stringify(b.data)),C({[s]:!0}),setTimeout(()=>{C({[s]:!1})},2e3)}).catch(b=>{console.log(b)})};return console.log("form data",r),e.jsx(v.Fragment,{children:e.jsxs(m,{children:[e.jsx(o,{sm:6,children:e.jsxs(n,{children:[e.jsxs(n.Header,{children:[g.blogData&&e.jsx(D,{}),e.jsx(n.Title,{as:"h5",children:"Blog"})]}),e.jsx(n.Body,{children:e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Heading"}),e.jsx(t.Control,{placeholder:"Enter heading",onChange:s=>{i({...r,blogData:{...r.blogData,Heading1:s.target.value}}),d({blogData:!1})},defaultValue:(E=a==null?void 0:a.pageData)==null?void 0:E.Heading1})]})}),e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Short Description"}),e.jsx(t.Control,{placeholder:"Enter Short Description",onChange:s=>{i({...r,blogData:{...r.blogData,Heading2:s.target.value}}),d({blogData:!1})},as:"textarea",rows:4,defaultValue:(y=a==null?void 0:a.pageData)==null?void 0:y.Heading2})]})}),e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Image"}),e.jsx(t.Control,{type:"file",onChange:s=>{I(s),d({...h,blogData:!1})}})]})}),e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Submitted Date"}),e.jsx(t.Control,{type:"date",value:r.blogData.CreatedOn?f(r.blogData.CreatedOn).format("YYYY-MM-DD"):f((T=a==null?void 0:a.pageData)==null?void 0:T.CreatedOn).format("YYYY-MM-DD"),onChange:s=>{i({...r,blogData:{...r.blogData,CreatedOn:f(s.target.value).format("YYYY-MM-DD HH:mm:ss")}}),d({blogData:!1})}})]})})]}),e.jsx(u,{variant:"primary",onClick:()=>j("blogData"),disabled:h.blogData,className:"float-right",children:"Submit"})]})})]})}),e.jsx(o,{sm:6,children:e.jsxs(n,{children:[e.jsxs(n.Header,{children:[g.metadata&&e.jsx(D,{}),e.jsx(n.Title,{as:"h5",children:"Metadata"})]}),e.jsx(n.Body,{children:e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Meta Title"}),e.jsx(t.Control,{placeholder:"Enter meta title",onChange:s=>{i(l=>({...l,metadata:{...l.metadata,MetaTitle:s.target.value}})),d({metadata:!1})},defaultValue:(G=a==null?void 0:a.pageData)==null?void 0:G.MetaTitle})]})}),e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter OG Title"}),e.jsx(t.Control,{placeholder:"Enter og title",onChange:s=>{i(l=>({...l,metadata:{...l.metadata,OGTitle:s.target.value}})),d({metadata:!1})},defaultValue:(B=a==null?void 0:a.pageData)==null?void 0:B.OGTitle})]})})]}),e.jsx(m,{children:e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Meta Description"}),e.jsx(t.Control,{as:"textarea",rows:3,onChange:s=>{i(l=>({...l,metadata:{...l.metadata,MetaDescription:s.target.value}})),d({metadata:!1})},defaultValue:(H=a==null?void 0:a.pageData)==null?void 0:H.MetaDescription,placeholder:"Enter meta description"})]})})}),e.jsx(m,{children:e.jsx(o,{md:12,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter OG Description"}),e.jsx(t.Control,{as:"textarea",onChange:s=>{i(l=>({...l,metadata:{...l.metadata,OGDescription:s.target.value}})),d({metadata:!1})},rows:3,defaultValue:(M=a==null?void 0:a.pageData)==null?void 0:M.OGDescription,placeholder:"Enter og description"})]})})}),e.jsx(m,{children:e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Meta Keywords"}),e.jsx(t.Control,{as:"textarea",onChange:s=>{i(l=>({...l,metadata:{...l.metadata,MetaKeywords:s.target.value}})),d({metadata:!1})},rows:3,defaultValue:(N=a==null?void 0:a.pageData)==null?void 0:N.MetaKeywords,placeholder:"Enter meta keywords"})]})})}),e.jsx(u,{variant:"primary",onClick:()=>j("metadata"),disabled:h.metadata,className:"float-right",children:"Submit"})]})})]})}),e.jsx(o,{sm:12,children:e.jsxs(n,{children:[e.jsxs(n.Header,{children:[g.blogDetails&&e.jsx(D,{}),e.jsx(n.Title,{as:"h5",children:"Blog"})]}),e.jsx(n.Body,{children:e.jsxs(t,{children:[e.jsxs(m,{children:[e.jsx(o,{md:6,children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Title"}),e.jsx(t.Control,{placeholder:"Enter Title",onChange:s=>{i(l=>{var c;return{...l,blogDetails:{...l.blogDetails,ContentTitle:s.target.value,ContentDetailId:(c=a==null?void 0:a.blogDetails)==null?void 0:c.ContentDetailId}}}),d({...h,blogDetails:!1})},defaultValue:(L=a==null?void 0:a.blogDetails)==null?void 0:L.ContentTitle})]})}),e.jsx(o,{sm:"12",children:e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Enter Description"}),e.jsx(S,{defaultValue:a?(O=a==null?void 0:a.blogDetails)==null?void 0:O.ContentDescription:"",contentSlug:"blogDetails",pageData:a,setBtnDisabled:d,setFormData:i,formData:r,btnDisabled:h})]})})]}),e.jsx(u,{variant:"primary",onClick:()=>j("blogDetails"),disabled:h.blogDetails,className:"float-right",children:"Submit"})]})})]})})]})})};export{Z as default};

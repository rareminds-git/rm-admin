import{b as v,r as h,j as e,R as K,B as C}from"./index-CpFmk86o.js";import{R as m,C as d,b as r,a as O}from"./axios-Dx3QdDAU.js";import{T as q}from"./TextEditor-BhXx2iB8.js";import{f as V}from"./helpers-D_C948am.js";import{S as y}from"./SuccessBanner-5bNXM_Ha.js";import{F as n}from"./Form-ClsflyVD.js";import"./ckeditor5-FiHyv50m.js";import"./toString-qof7_FyP.js";import"./Alert-B-JUCmsd.js";const Z=()=>{var g,T,E,G,I,N,L,w,B;const{userType:D,slug:f}=v(),[t,H]=h.useState(),[i,o]=h.useState({studyData:{},studyDetails:{},metadata:{}}),[u,c]=h.useState({studyData:!0,metadata:!0,studyDetails:!0}),[x,b]=h.useState({});h.useEffect(()=>{(()=>{let a={method:"get",maxBodyLength:1/0,url:`https://rareminds.in/api/case-studies/${D}/case-studies/${f}`,headers:{}};O.request(a).then(l=>{console.log("edit data",V(l.data)),H(V(l.data))}).catch(l=>{console.log(l)})})()},[]);const[R,$]=h.useState([]),S=s=>{var l;$(URL.createObjectURL(s.target.files[0]));const a=new FormData;i.ContentTitle&&a.append("ContentTitle",i.ContentTitle),i.ContentDescription&&a.append("ContentDescription",i.ContentDescription),i.ContentDetailId?a.append("ContentDescription",i.ContentDetailId):a.append("ContentDetailId",(l=t==null?void 0:t.studyDetails)==null?void 0:l.ContentDetailId),a.append("ContentImage",s.target.files[0]),o({studyDetails:a})},j=s=>{var M,F;let a=i[s];console.log("form data",i,s),s!=="studyDetails"&&(a.ContentSlug=s);let l=new FormData;s==="studyDetails"&&(R?(console.log("form data",i),a.ContentTitle&&l.append("ContentTitle",a.ContentTitle),a.ContentDescription&&l.append("ContentDescription",a.ContentDescription),l.append("ContentSlug",s),l.append("ContentDetailId",(F=t==null?void 0:t.studyDetails)==null?void 0:F.ContentDetailId)):(a.ContentTitle&&l.append("ContentTitle",a.ContentTitle),i.ContentDescription&&l.append("ContentDescription",a.ContentDescription),l.append("ContentSlug",s),l.append("ContentDetailId",(M=t==null?void 0:t.studyDetails)==null?void 0:M.ContentDetailId))),console.log("studydetaildata",l);let k={method:"post",maxBodyLength:1/0,url:`https://rareminds.in/api/editStudy/${D}/${f}/${s}`,headers:s==="studyDetails"?"Content-Type: multipart/form-data":"Content-Type: application/json",data:s==="studyDetails"?l:JSON.stringify(a)};O.request(k).then(p=>{console.log(JSON.stringify(p.data)),b({[s]:!0}),setTimeout(()=>{b({[s]:!1})},2e3)}).catch(p=>{console.log(p)})};return console.log("form data",i),e.jsx(K.Fragment,{children:e.jsxs(m,{children:[e.jsx(d,{sm:6,children:e.jsxs(r,{children:[e.jsxs(r.Header,{children:[x.studyData&&e.jsx(y,{}),e.jsx(r.Title,{as:"h5",children:"Case Study"})]}),e.jsx(r.Body,{children:e.jsxs(n,{children:[e.jsxs(m,{children:[e.jsx(d,{md:12,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Heading"}),e.jsx(n.Control,{placeholder:"Enter heading",onChange:s=>{o({...i,studyData:{...i.studyData,Heading1:s.target.value}}),c({studyData:!1})},defaultValue:(g=t==null?void 0:t.pageData)==null?void 0:g.Heading1})]})}),e.jsx(d,{md:12,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Description"}),e.jsx(n.Control,{placeholder:"Enter heading",onChange:s=>{o({...i,studyData:{...i.studyData,Heading2:s.target.value}}),c({studyData:!1})},as:"textarea",rows:4,defaultValue:(T=t==null?void 0:t.pageData)==null?void 0:T.Heading2})]})})]}),e.jsx(C,{variant:"primary",onClick:()=>j("studyData"),disabled:u.studyData,className:"float-right",children:"Submit"})]})})]})}),e.jsx(d,{sm:6,children:e.jsxs(r,{children:[e.jsxs(r.Header,{children:[x.metadata&&e.jsx(y,{}),e.jsx(r.Title,{as:"h5",children:"Metadata"})]}),e.jsx(r.Body,{children:e.jsxs(n,{children:[e.jsxs(m,{children:[e.jsx(d,{md:6,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Meta Title"}),e.jsx(n.Control,{placeholder:"Enter meta title",onChange:s=>{o(a=>({...a,metadata:{...a.metadata,MetaTitle:s.target.value}})),c({metadata:!1})},defaultValue:(E=t==null?void 0:t.pageData)==null?void 0:E.MetaTitle})]})}),e.jsx(d,{md:6,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter OG Title"}),e.jsx(n.Control,{placeholder:"Enter og title",onChange:s=>{o(a=>({...a,metadata:{...a.metadata,OGTitle:s.target.value}})),c({metadata:!1})},defaultValue:(G=t==null?void 0:t.pageData)==null?void 0:G.OGTitle})]})})]}),e.jsx(m,{children:e.jsx(d,{md:12,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Meta Description"}),e.jsx(n.Control,{as:"textarea",rows:3,onChange:s=>{o(a=>({...a,metadata:{...a.metadata,MetaDescription:s.target.value}})),c({metadata:!1})},defaultValue:(I=t==null?void 0:t.pageData)==null?void 0:I.MetaDescription,placeholder:"Enter meta description"})]})})}),e.jsx(m,{children:e.jsx(d,{md:12,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter OG Description"}),e.jsx(n.Control,{as:"textarea",onChange:s=>{o(a=>({...a,metadata:{...a.metadata,OGDescription:s.target.value}})),c({metadata:!1})},rows:3,defaultValue:(N=t==null?void 0:t.pageData)==null?void 0:N.OGDescription,placeholder:"Enter og description"})]})})}),e.jsx(m,{children:e.jsx(d,{md:6,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Meta Keywords"}),e.jsx(n.Control,{as:"textarea",onChange:s=>{o(a=>({...a,metadata:{...a.metadata,MetaKeywords:s.target.value}})),c({metadata:!1})},rows:3,defaultValue:(L=t==null?void 0:t.pageData)==null?void 0:L.MetaKeywords,placeholder:"Enter meta keywords"})]})})}),e.jsx(C,{variant:"primary",onClick:()=>j("metadata"),disabled:u.metadata,className:"float-right",children:"Submit"})]})})]})}),e.jsx(d,{sm:12,children:e.jsxs(r,{children:[e.jsxs(r.Header,{children:[x.studyDetails&&e.jsx(y,{}),e.jsx(r.Title,{as:"h5",children:"Case Study Details"})]}),e.jsx(r.Body,{children:e.jsxs(n,{children:[e.jsxs(m,{children:[e.jsx(d,{md:6,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Title"}),e.jsx(n.Control,{placeholder:"Enter Title",onChange:s=>{o(a=>{var l;return{...a,studyDetails:{...a.studyDetails,ContentTitle:s.target.value,ContentDetailId:(l=t==null?void 0:t.studyDetails)==null?void 0:l.ContentDetailId}}}),c({...u,studyDetails:!1})},defaultValue:(w=t==null?void 0:t.studyDetails)==null?void 0:w.ContentTitle})]})}),e.jsx(d,{md:6,children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Image"}),e.jsx(n.Control,{placeholder:"Enter Title",type:"file",onChange:s=>{S(s),c({...u,studyDetails:!1})}})]})}),e.jsx(d,{sm:"12",children:e.jsxs(n.Group,{className:"mb-3",children:[e.jsx(n.Label,{children:"Enter Description"}),e.jsx(q,{defaultValue:(B=t==null?void 0:t.studyDetails)==null?void 0:B.ContentDescription,contentSlug:"studyDetails",pageData:t,setBtnDisabled:c,setFormData:o,formData:i,btnDisabled:u})]})})]}),e.jsx(C,{variant:"primary",onClick:()=>j("studyDetails"),disabled:u.studyDetails,className:"float-right",children:"Submit"})]})})]})})]})})};export{Z as default};
